---
title: "GaR analysis"
# bibliography: C:\\Users\\Misha\\Documents\\References\\GaR.bib
fontsize: 11pt
output:
  rmarkdown::pdf_document:
    latex_engine: xelatex
    number_sections: true
    includes:
            in_header: !expr here::here('vignettes/GaR-preamble.tex')
vignette: >
  %\VignetteIndexEntry{GaR analysis}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF_8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE, echo = FALSE, message = FALSE,warning = FALSE, comment = "#>"
)
```


```{r setup}

devtools::load_all()

setwd(paste0(file.path(Sys.getenv("USERPROFILE"),fsep = "\\"),
             "\\Documents\\GaRPackg\\vignettes"))


```


```{r load_libraries}

library(cowplot)

library(gghighlight)

library(tidyselect)

library(tidyverse)

library(quantreg)

library(corrplot)

library(stargazer)

library(xtable)

```


```{r Set_parameters}

results = list()

parameters_list = list()

parameters_list$quantile_vec = c(0.05,0.25,0.5,0.75,0.95)

parameters_list$horizon_list = list(1,4,8,12)

parameters_list$drop_series = c(
  "Vacancies_Rate",
  "Telbor_1Y",
  "STARTUP_FP",
  "Sovereigh_spread",
  "Interbank_spread",
  "LT_real_rate_change",
  "Indus_prod_ind",
  "ILS_EURO",
  "breakeven_inflation_5_10_fwd"
)

theme_set(theme_bw() + theme(
  legend.position = "bottom", legend.title = element_blank()))

```



```{r Get_partitions, child="Partition-Specs.Rmd"}


```



```{r import_data, child="GaR-ImportAndProcessData.Rmd"}

```



```{r Analysis}

current_partition = partitions_list$gdp_comp_fin_cycle

results = run.GaR.analysis(partitions_list = current_partition,
                   vars_df = df,
                   target_var_name = "gdp",
                   horizon_list = parameters_list$horizon_list,
                   quantile_vec = parameters_list$quantile_vec,
                   pca.align.list = list(
                     Dom_FCI = list(
                       var_name = "spread_cpi_corp",
                       positive_direction = FALSE),
                     Dom_Macro = list(var_name = "private_consumption"),
                     Ext_Macro = list(var_name = "gdp_us"),
                     Ext_Fin = list(var_name = "rate_euro"),
                     Fin_Cycle = list(var_name = "credit")))

```



\section{Descriptive Stats}


```{r desc_stat, child="GaR-DescriptiveStat.Rmd"}

```


\section{Literature review}

```{r child="GaR-LitReview.Rmd", eval=FALSE}

```


\section{PCA results}

```{r plot_pca, child="GaR-Partition-Evaluation.Rmd"}


```


\section{Quantile regression results}

```{r plot_quantile_reg, child="GaR-Quantile-Regression.Rmd"}

```


\section{Stylized facts}

```{r child="GaR-StylizedFacts.Rmd", eval=FALSE}

```


\section{GaR timeseries}

```{r plot_gar, child="GaR-Timeseries.Rmd"}

```

\section{Goodness of fit}

```{r compare_predictions, child="GaR-Prediction-Comparison.Rmd"}

```



\section{Bibliography}

<div id="refs"></div>


\section {Appendix}

```{r child="GaR-Appendix.Rmd", eval=FALSE}

```


```{r child="GaR-Variables-Desc-Chart.Rmd", eval=FALSE}

```


